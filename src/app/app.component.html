<form class="toolbar">
  <label>
    <span>FONDO</span>

    <input type="file" (change)="onUpdateBackgroundImage($event)">
    <div class="mock-input-file">{{backgroundImageFile?.name ?? 'Selecciona un fondo'}}</div>
  </label>

  <label>
    <span>TAMAÃ‘O LIENZO</span>

    <div>
      <input type="number" min="1" id="canvas-width-input" name="canvas-width" [(ngModel)]="canvasWidth">
      :
      <input type="number" min="1" id="canvas-height-input" name="canvas-height" [(ngModel)]="canvasHeight">
    </div>
  </label>

  <div class="label">
    <span>FIGURAS</span>

    <div class="shape-radio-buttons-container">
      <label class="radio-button">
        <input type="radio" name="shape" [value]="Shape.RECT" [(ngModel)]="shapeToDraw"
          (ngModelChange)="onChangeShapeToDraw()">
        <span>rect</span>
      </label>

      <label class="radio-button">
        <input type="radio" name="shape" [value]="Shape.LINE" [(ngModel)]="shapeToDraw"
          (ngModelChange)="onChangeShapeToDraw()">
        <span>line</span>
      </label>

      <label class="radio-button">
        <input type="radio" name="shape" [value]="Shape.PATH" [(ngModel)]="shapeToDraw"
          (ngModelChange)="onChangeShapeToDraw()">
        <span>path</span>
      </label>

      <label class="radio-button">
        <input type="radio" name="shape" [value]="Shape.CIRCLE" [(ngModel)]="shapeToDraw"
          (ngModelChange)="onChangeShapeToDraw()">
        <span>circle</span>
      </label>

      <label class="radio-button">
        <input type="radio" name="shape" [value]="Shape.TEXT" [(ngModel)]="shapeToDraw"
          (ngModelChange)="onChangeShapeToDraw()">
        <span>text</span>
      </label>
    </div>
  </div>

  <div class="common-shape-options" *ngIf="shapePainter" [formGroup]="shapePainter.options">
    <label>
      <span>NOMBRE</span>
      <input type="text" formControlName="name">
    </label>

    <label>
      <span>STROKE WIDTH</span>
      <input type="number" min="0" step="0.5" formControlName="strokeWidth">
    </label>

    <div class="input-color-alpha">
      <label>
        <span>STROKE</span>
        <input type="color" formControlName="stroke">
        <div class="mock-input-color" [style]="{backgroundColor: getColorWithAlpha('stroke')}"></div>
      </label>

      <label>
        <span>A</span>
        <input type="number" min="0" max="1" step="0.05" class="alpha-input" formControlName="strokeAlpha">
      </label>
    </div>

    <div class="input-color-alpha">
      <label>
        <span>FILL</span>
        <input type="color" formControlName="fill">
        <div class="mock-input-color" [style]="{backgroundColor: getColorWithAlpha('fill')}"></div>
      </label>

      <label>
        <span>A</span>
        <input type="number" min="0" max="1" step="0.05" class="alpha-input" formControlName="fillAlpha">
      </label>
    </div>
  </div>

  <div class="buttons-container">
    <button class="download-button" (click)="downloadSvg()">Descargar svg</button>
    <button class="download-button" (click)="downloadPng()">Descargar png</button>
  </div>
</form>

<div class="canvas-and-shape-list">
  <div class="canvas-container">
    <svg id="canvas" #canvas [attr.viewBox]="'0 0 ' + canvasWidth + ' ' + canvasHeight">
    </svg>

    <div class="canvas-message"
      *ngIf="shapePainter && shapePainter.isShapeType(Shape.PATH) && shapePainter.isShapeStarted() && !shapePainter.isShapeCompleted()">
      Presiona la tecla F para terminar la figura y empezar una nueva.
    </div>
  </div>

  <div class="shape-list">
    <ng-container *ngFor="let shapePainter of shapeList">
      <app-rect-form (onShapeSelected)="selectShapePainter($event)" [rectPainter]="shapePainter"
        *ngIf="shapePainter.isShapeType(Shape.RECT)">
      </app-rect-form>

      <app-circle-form (onShapeSelected)="selectShapePainter($event)" [circlePainter]="shapePainter"
        *ngIf="shapePainter.isShapeType(Shape.CIRCLE)">
      </app-circle-form>

      <app-line-form (onShapeSelected)="selectShapePainter($event)" [linePainter]="shapePainter"
        *ngIf="shapePainter.isShapeType(Shape.LINE)">
      </app-line-form>

      <app-path-form (onShapeSelected)="selectShapePainter($event)" [pathPainter]="shapePainter"
        *ngIf="shapePainter.isShapeType(Shape.PATH)">
      </app-path-form>

      <app-text-form (onShapeSelected)="selectShapePainter($event)" [textPainter]="shapePainter"
        *ngIf="shapePainter.isShapeType(Shape.TEXT)">
      </app-text-form>
    </ng-container>
  </div>
</div>